<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>CB2040 Lab Prep</title>
<meta name="author" content="Alma Andersson"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/blood.css" id="theme"/>

<link rel="stylesheet" href="./center.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<base target="_blank">
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h1 class="title">CB2040 Lab Prep</h1><h2 class="author">Alma Andersson</h2><p class="date">Created: 2021-09-03 Fri 16:52</p>
</section>

<section>
<section id="slide-orgf0d9b33">
<h2 id="orgf0d9b33">Lab course Introduction</h2>
<p>
For these slides: <a href="https://almaan.github.io/genetech/">https://almaan.github.io/genetech/</a>
</p>

</section>
<section id="slide-org00ef3af">
<h3 id="org00ef3af">Teaching assistants</h3>
<p>
There are 4 of us:
</p>

<ul>
<li>Alma Andersson (almaan@kth.se)</li>
<li>Ludvig Larsson (ludvig.larsson@scilifelab.se)</li>
<li>Sami Saarenpää (sami.saarenpaa@scilifelab.se)</li>
<li>Trang Lee (trang.lee@scilifelab.se)</li>

</ul>


<div id="org9bc903a" class="figure">
<p><img src="./images/tas.png" alt="tas.png" />
</p>
</div>

</section>
<section id="slide-orge86e7e6">
<h3 id="orge86e7e6">A word on emails</h3>
<p>
Emails are welcome, but hands-on help with the exercises will mainly be limited to the
lab sessions. You can also reach us on Canvas, but slower response times.
</p>


<div id="org3c9f112" class="figure">
<p><img src="./images/fav-mail.jpg" alt="fav-mail.jpg" />
</p>
</div>

<p>
<b><b>NOTE</b></b>: Tag emails with [CB2040] in the subject line.<br />
For example: <i>"[CB2040] Question about lab 2"</i>
</p>

</section>
<section id="slide-org5ea38a0">
<h3 id="org5ea38a0">Today</h3>
<ul>
<li>Course structure, formalities, access to information, grading and deadlines</li>
<li>Overview of tools/software</li>
<li>Installation of tools and software</li>
<li>Question time!</li>

</ul>

</section>
<section id="slide-org1734ff5">
<h3 id="org1734ff5">Course Structure</h3>
<p>
In this course 4 labs in total, one "main TA" for each:
</p>
<ol>
<li data-fragment-index="1" class="fragment fade-in">Introduction to R [Alma]</li>
<li data-fragment-index="2" class="fragment fade-in">Bulk RNA-seq analysis [Sami]</li>
<li data-fragment-index="3" class="fragment fade-in">Single Cell RNA-seq analysis [Ludvig]</li>
<li data-fragment-index="4" class="fragment fade-in">Spatial Transcriptomics analysis [Alma]</li>

</ol>

<p>
All labs are in R, we assume that you have:
</p>
<ul>
<li class="fragment fade-in">access to a computer</li>
<li class="fragment fade-in">(zoom installed)</li>
<li class="fragment fade-in"><b><b>no prior</b></b> knowledge of R</li>
<li class="fragment fade-in">some familiarity with the <font color="lightgreen">terminal</font></li>

</ul>

</section>
<section id="slide-org1e81767">
<h3 id="org1e81767">Formalities</h3>
<p>
<b>Workflow:</b>
</p>
<ul>
<li class="fragment fade-in">Labs are written in R markdown (more on this later)</li>
<li class="fragment fade-in">Download exercises &#x2013;&gt; modify files in-place &#x2013;&gt; hand in modified file</li>
<li class="fragment fade-in">You hand in the modified file via <b><b>Canvas</b></b></li>
<li class="fragment fade-in">The labs are P/F</li>

</ul>

<p>
<b>Deadlines:</b>
</p>
<ul>
<li class="fragment fade-in">Hand-in: 1 week after scheduled lab session</li>
<li class="fragment fade-in">Grading : 1 week after hand-in deadline</li>
<li class="fragment fade-in">Revision : 1 week after grading deadline</li>

</ul>

<p class="fragment (fade-in) :frag_idx(4)">
<i>NOTE:</i> Late reports will be corrected, but you will get a set of additional
exercises to solve. An incomplete report is also considered late.
</p>

<p>
<b>Working in pairs?:</b>
</p>
<ul>
<li class="fragment fade-in">Strongly <b><b>Encouraged</b></b> to work alone
<ul>
<li>Helping each other out is also encouraged!</li>

</ul></li>
<li class="fragment fade-in">Pairs are ok, but remember pair = 2 people</li>
<li class="fragment fade-in">Hand in <i>identical</i> copies</li>
<li class="fragment fade-in">State <b><b>both</b></b> names in : file and comments</li>

</ul>

</section>
<section id="slide-orgf063b33">
<h3 id="orgf063b33">Finding Information</h3>
<p>
All information you need can be found at:<br />
</p>
<p target="&quot;blank&quot;">
<a href="https://github.com/almaan/genetech" target="&quot;blank&quot;">https://github.com/almaan/genetech</a>
</p>

<ul>
<li>I will refer to this as "the course repo".</li>
<li>Bookmark or save the link, we will be using it today</li>
<li>All information is there</li>

</ul>

</section>
<section id="slide-org953ac68">
<h3 id="org953ac68">A word about zoom</h3>
<ul>
<li>Make sure you have the latest version : <a href="https://zoom.us/download">download</a></li>
<li>We will have a zoom room open in case you are sick or can't make it</li>

</ul>

</section>
</section>
<section>
<section id="slide-org6780585">
<h2 id="org6780585">R</h2>
<div class="outline-text-2" id="text-org6780585">
</div>
</section>
<section id="slide-org8d072d6">
<h3 id="org8d072d6">What?</h3>
<ul>
<li class="fragment fade-in">Programming language for "statistical computing"</li>
<li class="fragment fade-in">Released in 1993</li>
<li class="fragment fade-in">Open Source &#x2013;&gt; we like free stuff!</li>
<li class="fragment fade-in">More than 15,000 additional packages! (add-ons)</li>
<li class="fragment fade-in">Interpreted language &#x2013;&gt; very easy to work with!</li>

</ul>

<ul><li class="fragment fade-in visible" style="list-style-type:none;">
<p>
Example C++ : Compiled language
</p>
<div class="org-src-container">

<pre class="src src-c++">    <span style="color: #ffffff; font-weight: bold; font-style: italic;">std</span>::<span style="color: #87afd7; font-weight: bold;">vector</span><span style="color: #8c8c8c;">&lt;</span><span style="color: #87afd7; font-weight: bold;">double</span><span style="color: #8c8c8c;">&gt;</span> <span style="color: #87afaf;">vec1</span> = <span style="color: #8c8c8c;">{</span><span style="color: #ffffff; font-weight: bold; font-style: italic;">1</span>,<span style="color: #ffffff; font-weight: bold; font-style: italic;">2</span>,<span style="color: #ffffff; font-weight: bold; font-style: italic;">3</span>,<span style="color: #ffffff; font-weight: bold; font-style: italic;">4</span><span style="color: #8c8c8c;">}</span>;
    <span style="color: #ffffff; font-weight: bold; font-style: italic;">std</span>::<span style="color: #87afd7; font-weight: bold;">vector</span><span style="color: #8c8c8c;">&lt;</span><span style="color: #87afd7; font-weight: bold;">double</span><span style="color: #8c8c8c;">&gt;</span> <span style="color: #87afaf;">vec2</span> = <span style="color: #8c8c8c;">{</span><span style="color: #ffffff; font-weight: bold; font-style: italic;">5</span>,<span style="color: #ffffff; font-weight: bold; font-style: italic;">6</span>,<span style="color: #ffffff; font-weight: bold; font-style: italic;">7</span>,<span style="color: #ffffff; font-weight: bold; font-style: italic;">8</span><span style="color: #8c8c8c;">}</span>;
    <span style="color: #87afd7; font-weight: bold;">double</span> <span style="color: #87afaf;">prod</span> = <span style="color: #ffffff; font-weight: bold; font-style: italic;">0</span>;

    <span style="color: #ffaf00; font-weight: bold;">for</span> <span style="color: #8c8c8c;">(</span><span style="color: #87afd7; font-weight: bold;">int</span> <span style="color: #87afaf;">i</span> = <span style="color: #ffffff; font-weight: bold; font-style: italic;">0</span>; i&lt;= vec1.size<span style="color: #93a8c6;">()</span>; i++<span style="color: #8c8c8c;">){</span>
      prod += vec1<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span>*vec2<span style="color: #93a8c6;">[</span>i<span style="color: #93a8c6;">]</span>;
    <span style="color: #8c8c8c;">}</span>
</pre>
</div>
<p>
Example R : Interpreted language
</p>
<div class="org-src-container">

<pre class="src src-RR">
  vec1 &lt;- c(1,2,3,4)
  vec2 &lt;- c(5,6,7,8)
  prod &lt;- vec1 %*%vec2
</pre>
</div>
</li></ul>

</section>
<section id="slide-org90cf979">
<h3 id="org90cf979">Why?</h3>
<ul>
<li data-fragment-index="1" class="fragment fade-in">One the most popular languages within the bioinformatic community</li>
<li data-fragment-index="2" class="fragment fade-in">Extremely well designed for "<i>data wrangling</i>"</li>
<li data-fragment-index="3" class="fragment fade_in">Has a <b><b>huge</b></b> ecosystem of packages for bioinformatic analysis</li>
<li data-fragment-index="4" class="fragment fade-in">Superior graphics system (<code>ggplot</code>) - don't underestimate this&#x2026;</li>
<li data-fragment-index="5" class="fragment fade-in">Often requested that PhD and job applicants know one of <code>Python</code> or <code>R</code>.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org5ecb060">
<h2 id="org5ecb060">Rstudio</h2>
<div class="outline-text-2" id="text-org5ecb060">
</div>
</section>
<section id="slide-org430a696">
<h3 id="org430a696">What is it?</h3>
<ul>
<li class="fragment fade-in">When editing code it's common to use an IDE (<i>Integrated Development Environment</i>)
<ul>
<li>This is like a "Microsoft Word" for code</li>

</ul></li>
<li class="fragment fade-in">IDEs are designed to facilitate programming; there are plenty of them
<ul>
<li>Personal favorite is Emacs (first release 1976)</li>

</ul></li>
<li class="fragment fade-in">We will be using <font color="orange">Rstudio</font>
<ul>
<li>an IDE specifically designed for R</li>
<li>also very user friendly</li>

</ul></li>
<li class="fragment fade-in">In short, Rstudio is the tool you will be using to <i>edit</i> your code.
<ul>
<li>Remember just as "Miscrosoft Word ≠ English", Rstudio ≠ R</li>

</ul></li>

</ul>

</section>
<section id="slide-orgb4c0a93">
<h3 id="orgb4c0a93">Features of Rstudio</h3>
<ul>
<li>Create a new file by: <i>File &#x2013;&gt; New File &#x2013;&gt; R Script</i></li>
<li>You should see something like this:</li>

</ul>

<div id="org07ed91f" class="figure">
<p><img src="./images/rstudio-show.png" alt="rstudio-show.png" width="60%" />
</p>
</div>
<ul>
<li>There are some key features I want to point out: <b><b><font color="cyan"> Source, Console, Terminal, and Environment</font></b></b></li>
<li>One more feature (<i>knitting</i>) that I will come back to</li>

</ul>

</section>
</section>
<section>
<section id="slide-org9c5ae4d">
<h2 id="org9c5ae4d">GitHub</h2>
<div class="outline-text-2" id="text-org9c5ae4d">
</div>
</section>
<section id="slide-orgfd5bce8">
<h3 id="orgfd5bce8">What?</h3>
<div class="column" style="float:left; width: 70%">
<ul>
<li>All lab material is hosted at GitHub (the course repo).</li>
<li><b><b>Git</b></b> is a system for distributed version control
<ul>
<li>GitHub is one (nice) remote hosting service when using git</li>

</ul></li>
<li>GitHub is widely used among bioinformaticians, computational biologist and software developers.
<ul>
<li>I host all my software there</li>

</ul></li>

</ul>
</div>
<div class="column" style="float:right; width: 30%">

<div id="org7b552ee" class="figure">
<p><img src="./images/github.png" alt="github.png" />
</p>
</div>
</div>

</section>
<section id="slide-org15ecd73">
<h3 id="org15ecd73">How::Clone labs from GitHub</h3>
<ul>
<li data-fragment-index="1" class="fragment fade-in">Clone repo : [Course Material] Online &#x2013;&gt; Local</li>
<li data-fragment-index="2" class="fragment fade-in">Go to a folder where you want to save your files
<ul>
<li>We call the path to this folder <code>GENETECH_PATH</code></li>

</ul></li>
<li data-fragment-index="3" class="fragment fade-in">Make a new folder called <code>genetech</code> in <code>GENETECH_PATH</code></li>
<li data-fragment-index="4" class="fragment fade-in"><code>cd</code> into the <code>genetech</code> folder and do:<br />
<code class="src src-sh">git clone https://github.com/almaan/genetech.git code</code></li>
<li data-fragment-index="5" class="fragment fade-in"><code>cd</code> into the (newly cloned) <code>code</code> folder and do:<br />
<code class="src src-sh">git checkout cb2040</code> &lt;&#x2013; this puts you on the right branch</li>

</ul>

</section>
</section>
<section>
<section id="slide-org8a1f079">
<h2 id="org8a1f079">Docker</h2>
<div class="outline-text-2" id="text-org8a1f079">
</div>
</section>
<section id="slide-orge86e167">
<h3 id="orge86e167">What?</h3>
<ul>
<li data-fragment-index="1" class="fragment fade-in">Open source <i>containerization</i> platform</li>
<li data-fragment-index="1" class="fragment fade-in">Allows you to bundle up OS, programs, packages, and whatever into an <i>image</i> that you can <b><b>share</b></b>
<ul>
<li>Like a portable OS, more robust and lightweight than Virtual Machines</li>

</ul></li>
<li data-fragment-index="2" class="fragment fade-in">Enables:
<ul>
<li>Reproducibility (<b><b>IMPORTANT</b></b>)</li>
<li>Sharing of analysis workflows</li>

</ul></li>

</ul>

</section>
<section id="slide-orga2726a8">
<h3 id="orga2726a8">Why?</h3>
<ul>
<li>Previous years we've spent <b><b>a lot</b></b> of time on installation and software issues</li>
<li>You don't think it's fun, we don't think it's fun</li>
<li>Using Docker, we minimize the risk of these issues
<ul>
<li>Focus on learning material rather than install</li>

</ul></li>
<li>I have created a Docker environment with all <code>R</code> packages and <code>rstudio</code></li>
<li>Commonly used in research, good to be familiar with</li>

</ul>

</section>
<section id="slide-orgd30e50b">
<h3 id="orgd30e50b">How::Download Docker?</h3>
<ul>
<li>Go to the GitHub course repo : <a href="https://github.com/almaan/genetech">link</a>
<ul>
<li>Pick the master branch</li>

</ul></li>

</ul>

<div id="org7140ac0" class="figure">
<p><img src="./images/master-branch.png" alt="master-branch.png" width="70%" height="70%" style="border:none;" />
</p>
</div>
<ul>
<li>Download and install Docker</li>
<li>To test if successful, in terminal do: <code class="src src-sh">docker ps</code></li>

</ul>

</section>
<section id="slide-org691fdc5">
<h3 id="org691fdc5">How::Download Docker Image?</h3>
<ul>
<li>Download the docker image (we will create a container from this)
<ul>
<li><code class="src src-sh">docker pull almaand/genetech:TAG</code></li>

</ul></li>
<li>Check if successful with
<ul>
<li><code class="src src-sh">docker images</code></li>

</ul></li>

</ul>

</section>
<section id="slide-org21c2f6e">
<h3 id="org21c2f6e">How::Build container and run Docker</h3>
<ul>
<li>Build your container and bind your <code>genetech</code> to a volume:<br />
<code class="src src-sh">docker run -d -p <span style="color: #ffffff; font-weight: bold; font-style: italic;">1337:8787</span> --name genetech -e <span style="color: #87afaf;">USER</span>=<span style="color: #afd75f;">'genetech'</span> -e <span style="color: #87afaf;">PASSWORD</span>=<span style="color: #afd75f;">'genetech'</span> --memory=<span style="color: #ffffff; font-weight: bold; font-style: italic;">6g</span> --mount <span style="color: #87afaf;">type</span>=bind,<span style="color: #87afaf;">source</span>=GENETECH_PATH,<span style="color: #87afaf;">target</span>=/home/genetech/code -e <span style="color: #87afaf;">ROOT</span>=TRUE almaand/genetech:TAG</code></li>
<li>Check if successful with: <code class="src src-sh">docker container ls -a</code>
<ul>
<li>You should see a container called <code>genetech</code></li>

</ul></li>

</ul>

</section>
<section id="slide-org9a34bfb">
<h3 id="org9a34bfb">How::Access rstudio</h3>
<ul>
<li>Having started a genetech container</li>
<li>Go to your favorite browser and enter:<br />
<code>localhost:1337</code></li>
<li>You will be prompted for credentials:
<ul>
<li><b><b>Username:</b></b> genetech</li>
<li><b><b>Password:</b></b> genetech</li>

</ul></li>
<li>You can only open files that are in mounted folders</li>

</ul>

</section>
<section id="slide-org245af37">
<h3 id="org245af37">How::Start and stop a container</h3>
<ul>
<li>To <font color="red"> stop</font> a running contianer do: <code class="src src-sh">docker stop CONTAINER_ID</code></li>
<li>To <font color="lightgreen"> start</font> a running contianer do: <code class="src src-sh">docker start CONTAINER_ID</code></li>

</ul>


<div id="orgb0afb55" class="figure">
<p><img src="./images/docker-container-list.png" alt="docker-container-list.png" />
</p>
</div>

</section>
</section>
<section>
<section id="slide-orgc8ffe54">
<h2 id="orgc8ffe54">The Labs</h2>
<div class="column" style="float:left; width: 70%">
<ul>
<li>Information at course repo, select branch <code>CB2040</code></li>
<li>All the labs are found in the repo we cloned before
<ul>
<li>Subfolders named <code>exY</code>, <code>Y = {1,2,3,4}</code> indicating which lab</li>

</ul></li>
<li>You work with the <code>exY/main.Rmd</code> files
<ul>
<li>Contains instructions and chunks to insert answers into</li>
<li>You hand in a <i>knitted</i> version of these files</li>

</ul></li>
<li>We've mounted this folder to the Docker container</li>
<li><p>
We've also installed all of the necessary packages for you
</p>
</div>
<div class="column" style="float:right; width: 30%">
<img src="./images/course-page.png" height=10%>
</div></li>

</ul>


</section>
<section id="slide-orged05998">
<h3 id="orged05998">Working with the code</h3>
<p>
To get an idea of how you work with the code, we will have a look at Lab 1
</p>
<ul>
<li>Go to Rstudio</li>
<li>Do: <i>File&#x2013;&gt;Open File</i></li>
<li>Choose the file <code>/home/genetech/code/labs/ex1/main.Rmd</code></li>

</ul>

</section>
<section id="slide-orgf086bda">
<h4 id="orgf086bda">Changing author name</h4>
<p>
At the top of the file you will see:
</p>

<div class="org-src-container">

<pre class="src src-yaml">  ---
  <span style="color: #87afaf;">title</span>: <span style="color: #afd75f;">"Lab 1 - Introduction to R"</span>
  <span style="color: #87afaf;">author</span>: <span style="color: #afd75f;">"Alma Andersson"</span>
  <span style="color: #87afaf;">date</span>: <span style="color: #afd75f;">"17-09-2021"</span>
  <span style="color: #87afaf;">output</span>:
    <span style="color: #87afaf;">tufte::tufte_html</span>: default 
  ---
</pre>
</div>

<p>
Change the author field to your name(s)
</p>

</section>
<section id="slide-org04ebf2f">
<h4 id="org04ebf2f">Code chunks</h4>
<p>
<br />
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #8c8c8c;">{</span>r,eval = <span style="color: #87afd7; font-weight: bold;">TRUE</span>, echo=<span style="color: #87afd7; font-weight: bold;">TRUE</span><span style="color: #8c8c8c;">}</span>
<span style="color: #5f5f87;"># </span><span style="color: #5f5f87;">bind the values 1337 to the variable fancy_name_1</span>
fancy_name_1 <span style="color: #ffffff; font-weight: bold; font-style: italic;">&lt;-</span> <span style="color: #ffffff; font-weight: bold; font-style: italic;">1337</span>
<span style="color: #5f5f87;"># </span><span style="color: #5f5f87;">print fancy_name_1</span>
print<span style="color: #8c8c8c;">(</span>sprintf<span style="color: #93a8c6;">(</span><span style="color: #afd75f;">"fancy_name_1 is : %d"</span>,fancy_name_1<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
<ul>
<li>The "boxes" with code are called <font color="orange">chunks</font>.</li>
<li>If you "run" a chunk (press green arrow) the code inside will be executed</li>
<li>This is where <i>you</i> will put in code (when prompted)</li>
<li>Don't change the settings (in curly brackets)</li>

</ul>

</section>
<section id="slide-org731a2a8">
<h4 id="org731a2a8">Knitting</h4>
<ul>
<li class="fragment fade-in">R markdown &#x2013;&gt; html and pdf documents.</li>
<li class="fragment fade-in">This process is called <i>knitting</i></li>
<li class="fragment fade-in">To knit your document, press the <b><b>yarn symbol</b></b> that says "<b><b>Knit</b></b>"</li>
<li class="fragment fade-in">Your rendered document should show up in the "<i>Viewer</i>" pane</li>
<li class="fragment fade-in">You should <b><b>always</b></b> hand in a knitted report (html)</li>
<li class="fragment fade-in">If your document does not knit successfully, something is wrong.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org06c7dbf">
<h2 id="org06c7dbf">Wrap up</h2>
<ul>
<li data-fragment-index="1" class="fragment fade-in">First lab session: 08:00-13:00, 2021/09/17</li>
<li data-fragment-index="1" class="fragment fade-in">Questions are welcome!</li>
<li data-fragment-index="1" class="fragment fade-in">We will hang around a bit after this session.</li>

</ul>
<p class="fragment (fade-in)">
<h2 class="fragment"> Thanks for the attention!</h2> 
</p>
</section>
</section>
</div>
</div>
<script src="./reveal.js/lib/js/head.min.js"></script>
<script src="./reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: false,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'slide', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend reveal.js
dependencies: [
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]

});
</script>
</body>
</html>
